<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FillMe • Hauptmenü</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }

        table {
            width: 90%;
            margin: 20px auto;
            border-collapse: collapse;
        }

        td {
            width: 30%;
            text-align: center;
        }

        button {
            width: 80%;
            padding: 10px;
            margin: 10px;
            font-size: 16px;
            background-color: lightgray;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }

        button:hover {
            background-color: gray;
            color: white;
        }

        #modeSelection {
            margin: 20px auto;
        }

        #overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 9;
        }

        #resultModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 20px;
            border: 2px solid black;
            z-index: 10;
        }

        .level {
            display: inline-block;
            width: 25%; /* 25% der Breite */
            height: 70px; /* Höhe der Buttons */
            margin: 2.5%; /* 5% Abstand insgesamt (2.5% auf jeder Seite) */
            border: 2px solid black;
            border-radius: 10px; /* Abgerundete Ecken */
            cursor: pointer;
            line-height: 70px; /* Vertikale Zentrierung des Textes */
            font-size: 18px; /* Kleinere Schriftgröße */
            background-color: lightgray;
        }

        /* Style for profile buttons */
        .profileButton {
            width: 45%;
            padding: 10px;
            font-size: 16px;
            background-color: salmon;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            display: inline-block;
            margin: 0 5%;
        }
        .profileButton:hover {
            background-color: tomato;
            color: white;
        }
        
    </style>
</head>
<body>
    <h1>FillMe • Hauptmenü</h1>
    <p>Ziel ist es, das Spielfeld komplett in einer Farbe zu füllen. Du beginnst in der Mitte und wählst bei jedem Zug eine Farbe. Jede angrenzende Fläche in deiner gewählten Farbe wird dann deinem Bereich hinzugefügt. Das Ziel ist, möglichst viele Felder in wenigen Zügen einzunehmen. Achte darauf, strategisch vorzugehen, da du nur eine begrenzte Anzahl an Zügen hast. Gewinne, indem du das gesamte Spielfeld in deiner Farbe füllst.</p></p>

    <!-- Modus-Auswahl -->
    <div id="modeSelection">
        <h2>Wähle deinen Modus:</h2>
        <button onclick="showProfile()">Profil</button>
        <button onclick="showSinglePlayer()">Einzelspieler</button>
        <button onclick="showMultiPlayer()">Mehrspieler</button>
        <button onclick="showChallenges()">Herausforderungen [BETA]</button>
    </div>

    <!-- Profil-Ansicht -->
    <div id="profile" style="display: none;">
    <img id="challengeBanner" src="herausforderung_spiel_index_banner.png.PNG" alt="Herausforderungen Banner" style="width: 90%;">
    <p>Profil für <span id="username" style="font-weight: bold;"></span></p>
    <p>EXP: <span id="userExp"></span></p>
    <p>Punkte: <span id="userPoints"></span></p>
    <p>Bonus Punkte: <span id="userBonusPoints"></span></p>

    <!-- Musik Dropdown mit größerem Styling -->
    <div style="margin: 15px auto; width: 90%;">
        <label for="musicSelect">Wähle Musik:</label>
        <select id="musicSelect" onchange="playMusic()" style="padding: 10px; font-size: 18px;">
            <option value="">Keine Musik</option>
            <option value="jazz_eins.mp3">Jazz</option>
            <option value="soft_rock_eins.mp3">Rock</option>
            <option value="dance_eins.mp3">Dance</option>
        </select>
    </div>

    <div style="display: flex; justify-content: space-between; width: 90%; margin: 0 auto;">
        <button class="profileButton" onclick="logout()">Abmelden</button>
        <button class="profileButton" onclick="accountDelete()">Account löschen</button>
    </div>
</div>
    <audio id="musicPlayer" loop></audio>

    <!-- Einzelspieler Optionen -->
    <div id="singlePlayer" style="display: none;">
        <img src="ein_spieler_spiel_index_banner.png.PNG" alt="Einzelspieler Banner" style="width: 90%;">
        <p>Spiele Filler im Einzelspielermodus</p>
        <select id="gridSize">
            <option value="5">5x5</option>
            <option value="11">11x11</option>
            <option value="15">15x15</option>
            <option value="21">21x21</option>
            <option value="25">25x25</option>
            <option value="31">31x31</option>
            <option value="35">35x35</option>
            <option value="41">41x41</option>
            <option value="45">45x45</option>
            
        </select>
        <select id="numMoves">
            <option value="5">5 Züge</option>
            <option value="10">10 Züge</option>
            <option value="15">15 Züge</option>
            <option value="20">20 Züge</option>
            <option value="25">25 Züge</option>
            <option value="30">30 Züge</option>
            <option value="40">40 Züge</option>
            <option value="50">50 Züge</option>
            <option value="unlimited">Unendlich</option>
        </select>
        <select id="numColors">
            <option value="3">3 Farben</option>
            <option value="5">5 Farben</option>
            <option value="7">7 Farben</option>
            <option value="9">9 Farben</option>
            <option value="11">11 Farben</option>
            <option value="13">13 Farben</option>
            <option value="15">15 Farben</option>
        </select>
        <button onclick="startSinglePlayer()">Spiel starten</button>
    </div>

    <!-- Mehrspieler Optionen -->
    <div id="multiPlayer" style="display: none;">
        <img src="zwei_spieler_spiel_index_banner.png.PNG" alt="Mehrspieler Banner" style="width: 90%;">
        <p>Spiele Filler im Mehrspielermodus</p>
        <select id="gridSizeMulti">
            <option value="5">5x5</option>
            <option value="11">11x11</option>
            <option value="15">15x15</option>
            <option value="21">21x21</option>
            <option value="25">25x25</option>
            <option value="31">31x31</option>
            <option value="35">35x35</option>
            <option value="41">41x41</option>
            <option value="45">45x45</option>
        </select>
        <select id="numColorsMulti">
            <option value="3">3 Farben</option>
            <option value="5">5 Farben</option>
            <option value="7">7 Farben</option>
            <option value="9">9 Farben</option>
            <option value="11">11 Farben</option>
            <option value="13">13 Farben</option>
            <option value="15">15 Farben</option>
        </select>
        <button onclick="startMultiPlayer()">Spiel starten</button>
    </div>

    <!-- Herausforderungen -->
    <div id="challenges" style="display: none;">
        <img id="challengeBanner" src="herausforderung_spiel_index_banner.png.PNG" alt="Herausforderungen Banner" style="width: 90%;">
        <p>Spiele Filler mit einzigartigen Herausforderungen</p>
        <div id="levelButtons">
            <div id="btn-l1" class="level" onclick="startChallenge(1)">1</div>
<div id="btn-l2" class="level" onclick="startChallenge(2)">2</div>
<div id="btn-l3" class="level" onclick="startChallenge(3)">3</div>
<div id="btn-l4" class="level" onclick="startChallenge(4)">4</div>
<div id="btn-l5" class="level" onclick="startChallenge(5)">5</div>
<div id="btn-l6" class="level" onclick="startChallenge(6)">6</div>
<div id="btn-l7" class="level" onclick="startChallenge(7)">7</div>
<div id="btn-l8" class="level" onclick="startChallenge(8)">8</div>
<div id="btn-l9" class="level" onclick="startChallenge(9)">9</div>
<div id="btn-l10" class="level" onclick="startChallenge(10)">10</div>
<div id="btn-l11" class="level" onclick="startChallenge(11)">11</div>
<div id="btn-l12" class="level" onclick="startChallenge(12)">12</div>
<div id="btn-l13" class="level" onclick="startChallenge(13)">13</div>
<div id="btn-l14" class="level" onclick="startChallenge(14)">14</div>
<div id="btn-l15" class="level" onclick="startChallenge(15)">15</div>
<div id="btn-l16" class="level" onclick="startChallenge(16)">16</div>
<div id="btn-l17" class="level" onclick="startChallenge(17)">17</div>
<div id="btn-l18" class="level" onclick="startChallenge(18)">18</div>
<div id="btn-l19" class="level" onclick="startChallenge(19)">19</div>
<div id="btn-l20" class="level" onclick="startChallenge(20)">20</div>
<div id="btn-l21" class="level" onclick="startChallenge(21)">21</div>
<div id="btn-l22" class="level" onclick="startChallenge(22)">22</div>
<div id="btn-l23" class="level" onclick="startChallenge(23)">23</div>
<div id="btn-l24" class="level" onclick="startChallenge(24)">24</div>
<div id="btn-l25" class="level" onclick="startChallenge(25)">25</div>
<div id="btn-l26" class="level" onclick="startChallenge(26)">26</div>
<div id="btn-l27" class="level" onclick="startChallenge(27)">27</div>
<div id="btn-l28" class="level" onclick="startChallenge(28)">28</div>
<div id="btn-l29" class="level" onclick="startChallenge(29)">29</div>
<div id="btn-l30" class="level" onclick="startChallenge(30)">30</div>
<div id="btn-l31" class="level" onclick="startChallenge(31)">31</div>
<div id="btn-l32" class="level" onclick="startChallenge(32)">32</div>
<div id="btn-l33" class="level" onclick="startChallenge(33)">33</div>
<div id="btn-l34" class="level" onclick="startChallenge(34)">34</div>
<div id="btn-l35" class="level" onclick="startChallenge(35)">35</div>
<div id="btn-l36" class="level" onclick="startChallenge(36)">36</div>
<div id="btn-l37" class="level" onclick="startChallenge(37)">37</div>
<div id="btn-l38" class="level" onclick="startChallenge(38)">38</div>
<div id="btn-l39" class="level" onclick="startChallenge(39)">39</div>
<div id="btn-l40" class="level" onclick="startChallenge(40)">40</div>
<div id="btn-l41" class="level" onclick="startChallenge(41)">41</div>
<div id="btn-l42" class="level" onclick="startChallenge(42)">42</div>
<div id="btn-l43" class="level" onclick="startChallenge(43)">43</div>
<div id="btn-l44" class="level" onclick="startChallenge(44)">44</div>
<div id="btn-l45" class="level" onclick="startChallenge(45)">45</div>
<div id="btn-l46" class="level" onclick="startChallenge(46)">46</div>
<div id="btn-l47" class="level" onclick="startChallenge(47)">47</div>
<div id="btn-l48" class="level" onclick="startChallenge(48)">48</div>
<div id="btn-l49" class="level" onclick="startChallenge(49)">49</div>
<div id="btn-l50" class="level" onclick="startChallenge(50)">50</div>
<div id="btn-l51" class="level" onclick="startChallenge(51)">51</div>
<div id="btn-l52" class="level" onclick="startChallenge(52)">52</div>
<div id="btn-l53" class="level" onclick="startChallenge(53)">53</div>
<div id="btn-l54" class="level" onclick="startChallenge(54)">54</div>
<div id="btn-l55" class="level" onclick="startChallenge(55)">55</div>
<div id="btn-l56" class="level" onclick="startChallenge(56)">56</div>
<div id="btn-l57" class="level" onclick="startChallenge(57)">57</div>
<div id="btn-l58" class="level" onclick="startChallenge(58)">58</div>
<div id="btn-l59" class="level" onclick="startChallenge(59)">59</div>
<div id="btn-l60" class="level" onclick="startChallenge(60)">60</div>
<div id="btn-l61" class="level" onclick="startChallenge(61)">61</div>
<div id="btn-l62" class="level" onclick="startChallenge(62)">62</div>
<div id="btn-l63" class="level" onclick="startChallenge(63)">63</div>
<div id="btn-l64" class="level" onclick="startChallenge(64)">64</div>
<div id="btn-l65" class="level" onclick="startChallenge(65)">65</div>
<div id="btn-l66" class="level" onclick="startChallenge(66)">66</div>
<div id="btn-l67" class="level" onclick="startChallenge(67)">67</div>
<div id="btn-l68" class="level" onclick="startChallenge(68)">68</div>
<div id="btn-l69" class="level" onclick="startChallenge(69)">69</div>
<div id="btn-l70" class="level" onclick="startChallenge(70)">70</div>
<div id="btn-l71" class="level" onclick="startChallenge(71)">71</div>
<div id="btn-l72" class="level" onclick="startChallenge(72)">72</div>
<div id="btn-l73" class="level" onclick="startChallenge(73)">73</div>
<div id="btn-l74" class="level" onclick="startChallenge(74)">74</div>
<div id="btn-l75" class="level" onclick="startChallenge(75)">75</div>
<div id="btn-l76" class="level" onclick="startChallenge(76)">76</div>
<div id="btn-l77" class="level" onclick="startChallenge(77)">77</div>
<div id="btn-l78" class="level" onclick="startChallenge(78)">78</div>
<div id="btn-l79" class="level" onclick="startChallenge(79)">79</div>
<div id="btn-l80" class="level" onclick="startChallenge(80)">80</div>
<div id="btn-l81" class="level" onclick="startChallenge(81)">81</div>
<div id="btn-l82" class="level" onclick="startChallenge(82)">82</div>
<div id="btn-l83" class="level" onclick="startChallenge(83)">83</div>
<div id="btn-l84" class="level" onclick="startChallenge(84)">84</div>
<div id="btn-l85" class="level" onclick="startChallenge(85)">85</div>
<div id="btn-l86" class="level" onclick="startChallenge(86)">86</div>
<div id="btn-l87" class="level" onclick="startChallenge(87)">87</div>
<div id="btn-l88" class="level" onclick="startChallenge(88)">88</div>
<div id="btn-l89" class="level" onclick="startChallenge(89)">89</div>
<div id="btn-l90" class="level" onclick="startChallenge(90)">90</div>
<div id="btn-l91" class="level" onclick="startChallenge(91)">91</div>
<div id="btn-l92" class="level" onclick="startChallenge(92)">92</div>
<div id="btn-l93" class="level" onclick="startChallenge(93)">93</div>
<div id="btn-l94" class="level" onclick="startChallenge(94)">94</div>
<div id="btn-l95" class="level" onclick="startChallenge(95)">95</div>
<div id="btn-l96" class="level" onclick="startChallenge(96)">96</div>
<div id="btn-l97" class="level" onclick="startChallenge(97)">97</div>
<div id="btn-l98" class="level" onclick="startChallenge(98)">98</div>
<div id="btn-l99" class="level" onclick="startChallenge(99)">99</div>
<div id="btn-l100" class="level" onclick="startChallenge(100)">100</div>
<div id="btn-l101" class="level" onclick="startChallenge(101)">101</div>
<div id="btn-l102" class="level" onclick="startChallenge(102)">102</div>
<div id="btn-l103" class="level" onclick="startChallenge(103)">103</div>
<div id="btn-l104" class="level" onclick="startChallenge(104)">104</div>
<div id="btn-l105" class="level" onclick="startChallenge(105)">105</div>
<div id="btn-l106" class="level" onclick="startChallenge(106)">106</div>
<div id="btn-l107" class="level" onclick="startChallenge(107)">107</div>
<div id="btn-l108" class="level" onclick="startChallenge(108)">108</div>
<div id="btn-l109" class="level" onclick="startChallenge(109)">109</div>
<div id="btn-l110" class="level" onclick="startChallenge(110)">110</div>
<div id="btn-l111" class="level" onclick="startChallenge(111)">111</div>
<div id="btn-l112" class="level" onclick="startChallenge(112)">112</div>
<div id="btn-l113" class="level" onclick="startChallenge(113)">113</div>
<div id="btn-l114" class="level" onclick="startChallenge(114)">114</div>
<div id="btn-l115" class="level" onclick="startChallenge(115)">115</div>
<div id="btn-l116" class="level" onclick="startChallenge(116)">116</div>
<div id="btn-l117" class="level" onclick="startChallenge(117)">117</div>
<div id="btn-l118" class="level" onclick="startChallenge(118)">118</div>
<div id="btn-l119" class="level" onclick="startChallenge(119)">119</div>
<div id="btn-l120" class="level" onclick="startChallenge(120)">120</div>

          <!-- Weitere 30 Level, wenn alle vorigen abgeschlossen sind -->
<div id="btn-l121" class="level" onclick="startChallenge(121)">121</div>
<div id="btn-l122" class="level" onclick="startChallenge(122)">122</div>
<div id="btn-l123" class="level" onclick="startChallenge(123)">123</div>
<div id="btn-l124" class="level" onclick="startChallenge(124)">124</div>
<div id="btn-l125" class="level" onclick="startChallenge(125)">125</div>
<div id="btn-l126" class="level" onclick="startChallenge(126)">126</div>
<div id="btn-l127" class="level" onclick="startChallenge(127)">127</div>
<div id="btn-l128" class="level" onclick="startChallenge(128)">128</div>
<div id="btn-l129" class="level" onclick="startChallenge(129)">129</div>
<div id="btn-l130" class="level" onclick="startChallenge(130)">130</div>
<div id="btn-l131" class="level" onclick="startChallenge(131)">131</div>
<div id="btn-l132" class="level" onclick="startChallenge(132)">132</div>
<div id="btn-l133" class="level" onclick="startChallenge(133)">133</div>
<div id="btn-l134" class="level" onclick="startChallenge(134)">134</div>
<div id="btn-l135" class="level" onclick="startChallenge(135)">135</div>
<div id="btn-l136" class="level" onclick="startChallenge(136)">136</div>
<div id="btn-l137" class="level" onclick="startChallenge(137)">137</div>
<div id="btn-l138" class="level" onclick="startChallenge(138)">138</div>
<div id="btn-l139" class="level" onclick="startChallenge(139)">139</div>
<div id="btn-l140" class="level" onclick="startChallenge(140)">140</div>
<div id="btn-l141" class="level" onclick="startChallenge(141)">141</div>
<div id="btn-l142" class="level" onclick="startChallenge(142)">142</div>
<div id="btn-l143" class="level" onclick="startChallenge(143)">143</div>
<div id="btn-l144" class="level" onclick="startChallenge(144)">144</div>
<div id="btn-l145" class="level" onclick="startChallenge(145)">145</div>
<div id="btn-l146" class="level" onclick="startChallenge(146)">146</div>
<div id="btn-l147" class="level" onclick="startChallenge(147)">147</div>
<div id="btn-l148" class="level" onclick="startChallenge(148)">148</div>
<div id="btn-l149" class="level" onclick="startChallenge(149)">149</div>
<div id="btn-l150" class="level" onclick="startChallenge(150)">150</div>


        </div>
    </div>

    <div id="overlay"></div>
    <div id="resultModal">
        <h2>Spielende</h2>
        <p id="resultMessage"></p>
        <button id="restartGame">OK</button>
    </div>

    <script>
        // Funktionen um die verschiedenen Abschnitte anzuzeigen
        function showSinglePlayer() {
            const button_pressed_music = new Audio('button_pressed.mp3');
            button_pressed_music.play();
            document.getElementById('singlePlayer').style.display = 'block';
            document.getElementById('multiPlayer').style.display = 'none';
            document.getElementById('challenges').style.display = 'none';
            document.getElementById('profile').style.display = 'none';
        }

        function showMultiPlayer() {
            const button_pressed_music = new Audio('button_pressed.mp3');
            button_pressed_music.play();
            document.getElementById('singlePlayer').style.display = 'none';
            document.getElementById('multiPlayer').style.display = 'block';
            document.getElementById('challenges').style.display = 'none';
            document.getElementById('profile').style.display = 'none';
        }

        function showChallenges() {
            const button_pressed_music = new Audio('button_pressed.mp3');
            button_pressed_music.play();
            document.getElementById('singlePlayer').style.display = 'none';
            document.getElementById('multiPlayer').style.display = 'none';
            document.getElementById('challenges').style.display = 'block';
            document.getElementById('profile').style.display = 'none';
            loadLevels(); // Lade die Level, wenn die Herausforderungen angezeigt werden
        }

        // Profil anzeigen und Informationen aus localStorage holen
        function showProfile() {
            const button_pressed_music = new Audio('button_pressed.mp3');
            button_pressed_music.play();
            const currentUser = localStorage.getItem('currentUsername');
            if (!currentUser) {
                alert('Kein Benutzername gefunden. Bitte melden Sie sich an.');
                return;
            }
            document.getElementById('username').textContent = currentUser;
            document.getElementById('userExp').textContent = localStorage.getItem(`exp_${currentUser}`) || 0;
            document.getElementById('userPoints').textContent = localStorage.getItem(`points_${currentUser}`) || 0;
            document.getElementById('userBonusPoints').textContent = localStorage.getItem(`bonusPoints_${currentUser}`) || 0;

            document.getElementById('singlePlayer').style.display = 'none';
            document.getElementById('multiPlayer').style.display = 'none';
            document.getElementById('challenges').style.display = 'none';
            document.getElementById('profile').style.display = 'block';
        }
function playMusic() {
    const musicSelect = document.getElementById("musicSelect");
    const musicPlayer = document.getElementById("musicPlayer");
    const selectedSong = musicSelect.value;

    const currentUser = localStorage.getItem('currentUsername'); // Hole den aktuellen Benutzernamen

    if (selectedSong) {
        // Speichere die ausgewählte Musik und den Zeitstempel für den aktuellen Benutzer
        const timestamp = new Date().toISOString(); // Aktueller Zeitstempel im ISO-Format
        localStorage.setItem(`${currentUser}_selectedSong`, selectedSong);
        localStorage.setItem(`${currentUser}_musicTimestamp`, timestamp); // Speichere den Zeitstempel
        musicPlayer.src = selectedSong;
        musicPlayer.play();
    } else {
        musicPlayer.pause();
        musicPlayer.currentTime = 0; // Setze den Track zurück
        localStorage.removeItem(`${currentUser}_selectedSong`); // Entferne die Auswahl für den aktuellen Benutzer
        localStorage.removeItem(`${currentUser}_musicTimestamp`); // Entferne den Zeitstempel für den aktuellen Benutzer
    }
}

function loadMusic() {
    const currentUser = localStorage.getItem('currentUsername');
    const savedSong = localStorage.getItem(`${currentUser}_selectedSong`); // Hole die gespeicherte Musik für den aktuellen Benutzer
    const savedTimestamp = localStorage.getItem(`${currentUser}_musicTimestamp`); // Hole den gespeicherten Zeitstempel

    const musicSelect = document.getElementById("musicSelect");
    if (savedSong) {
        musicSelect.value = savedSong; // Setze die Auswahl im Dropdown
        const musicPlayer = document.getElementById("musicPlayer");
        musicPlayer.src = savedSong; // Setze die Quelle des Players
        musicPlayer.play(); // Spiele die Musik ab
    } else {
        musicSelect.value = "none"; // Setze die Auswahl auf "Keine Musik", falls keine Auswahl gespeichert ist
    }
}

        

        function startSinglePlayer() {
            const gridSize = document.getElementById('gridSize').value;
            const numMoves = document.getElementById('numMoves').value;
            const numColors = document.getElementById('numColors').value;
            window.location.href = `ein_spieler_spiel.html?gridSize=${gridSize}&numMoves=${numMoves}&numColors=${numColors}`;
        }

        function startMultiPlayer() {
            const gridSize = document.getElementById('gridSizeMulti').value;
            const numColors = document.getElementById('numColorsMulti').value;
            window.location.href = `zwei_spieler_spiel.html?gridSize=${gridSize}&numColors=${numColors}`;
        }

        // Neue Herausforderungen Level
const levels = {
    1: { gridSize: 5, numColors: 3, numMoves: 7, points: 20, lvl: 1 },
    2: { gridSize: 5, numColors: 3, numMoves: 8, points: 22, lvl: 2 },
    3: { gridSize: 5, numColors: 3, numMoves: 9, points: 24, lvl: 3 },
    4: { gridSize: 5, numColors: 3, numMoves: 10, points: 25, lvl: 4 },
    5: { gridSize: 5, numColors: 3, numMoves: 11, points: 26, lvl: 5 },
    
    6: { gridSize: 5, numColors: 3, numMoves: 12, points: 28, lvl: 6 },
    7: { gridSize: 5, numColors: 4, numMoves: 13, points: 30, lvl: 7 },
    8: { gridSize: 5, numColors: 4, numMoves: 14, points: 32, lvl: 8 },
    9: { gridSize: 5, numColors: 4, numMoves: 15, points: 33, lvl: 9 },
    10: { gridSize: 7, numColors: 4, numMoves: 16, points: 40, lvl: 10 },

    11: { gridSize: 7, numColors: 4, numMoves: 17, points: 43, lvl: 11 },
    12: { gridSize: 7, numColors: 4, numMoves: 18, points: 44, lvl: 12 },
    13: { gridSize: 7, numColors: 4, numMoves: 19, points: 45, lvl: 13 },
    14: { gridSize: 7, numColors: 4, numMoves: 20, points: 46, lvl: 14 },
    15: { gridSize: 7, numColors: 5, numMoves: 21, points: 47, lvl: 15 },

    16: { gridSize: 7, numColors: 5, numMoves: 22, points: 48, lvl: 16 },
    17: { gridSize: 7, numColors: 5, numMoves: 23, points: 50, lvl: 17 },
    18: { gridSize: 7, numColors: 5, numMoves: 24, points: 52, lvl: 18 },
    19: { gridSize: 7, numColors: 5, numMoves: 25, points: 53, lvl: 19 },
    20: { gridSize: 9, numColors: 5, numMoves: 26, points: 60, lvl: 20 },

    21: { gridSize: 9, numColors: 5, numMoves: 27, points: 62, lvl: 21 },
    22: { gridSize: 9, numColors: 5, numMoves: 28, points: 63, lvl: 22 },
    23: { gridSize: 9, numColors: 6, numMoves: 29, points: 65, lvl: 23 },
    24: { gridSize: 9, numColors: 6, numMoves: 30, points: 67, lvl: 24 },
    25: { gridSize: 9, numColors: 6, numMoves: 31, points: 69, lvl: 25 },

    26: { gridSize: 9, numColors: 6, numMoves: 32, points: 71, lvl: 26 },
    27: { gridSize: 9, numColors: 6, numMoves: 33, points: 73, lvl: 27 },
    28: { gridSize: 9, numColors: 7, numMoves: 34, points: 74, lvl: 28 },
    29: { gridSize: 9, numColors: 7, numMoves: 35, points: 76, lvl: 29 },
    30: { gridSize: 11, numColors: 7, numMoves: 36, points: 90, lvl: 30 },

    31: { gridSize: 11, numColors: 7, numMoves: 37, points: 92, lvl: 31 },
    32: { gridSize: 11, numColors: 7, numMoves: 38, points: 94, lvl: 32 },
    33: { gridSize: 11, numColors: 7, numMoves: 39, points: 96, lvl: 33 },
    34: { gridSize: 11, numColors: 8, numMoves: 40, points: 98, lvl: 34 },
    35: { gridSize: 11, numColors: 8, numMoves: 41, points: 100, lvl: 35 },

    36: { gridSize: 11, numColors: 8, numMoves: 42, points: 101, lvl: 36 },
    37: { gridSize: 11, numColors: 8, numMoves: 43, points: 103, lvl: 37 },
    38: { gridSize: 11, numColors: 8, numMoves: 44, points: 105, lvl: 38 },
    39: { gridSize: 11, numColors: 9, numMoves: 45, points: 107, lvl: 39 },
    40: { gridSize: 13, numColors: 9, numMoves: 46, points: 120, lvl: 40 },

    41: { gridSize: 13, numColors: 9, numMoves: 47, points: 122, lvl: 41 },
    42: { gridSize: 13, numColors: 9, numMoves: 48, points: 124, lvl: 42 },
    43: { gridSize: 13, numColors: 9, numMoves: 49, points: 126, lvl: 43 },
    44: { gridSize: 13, numColors: 9, numMoves: 50, points: 127, lvl: 44 },
    45: { gridSize: 13, numColors: 10, numMoves: 51, points: 130, lvl: 45 },

    46: { gridSize: 13, numColors: 10, numMoves: 52, points: 132, lvl: 46 },
    47: { gridSize: 13, numColors: 10, numMoves: 53, points: 135, lvl: 47 },
    48: { gridSize: 13, numColors: 10, numMoves: 54, points: 138, lvl: 48 },
    49: { gridSize: 13, numColors: 10, numMoves: 55, points: 140, lvl: 49 },
    50: { gridSize: 15, numColors: 10, numMoves: 56, points: 220, lvl: 50 }, // 225 möglich
    51: { gridSize: 15, numColors: 10, numMoves: 57, points: 227, lvl: 51 },
    52: { gridSize: 15, numColors: 10, numMoves: 58, points: 230, lvl: 52 },
    53: { gridSize: 15, numColors: 10, numMoves: 59, points: 233, lvl: 53 },
    54: { gridSize: 15, numColors: 10, numMoves: 60, points: 235, lvl: 54 },
    55: { gridSize: 15, numColors: 11, numMoves: 61, points: 238, lvl: 55 },

    56: { gridSize: 15, numColors: 11, numMoves: 62, points: 240, lvl: 56 },
    57: { gridSize: 15, numColors: 11, numMoves: 63, points: 245, lvl: 57 },
    58: { gridSize: 15, numColors: 11, numMoves: 64, points: 250, lvl: 58 },
    59: { gridSize: 17, numColors: 11, numMoves: 65, points: 280, lvl: 59 }, // 289 möglich
    60: { gridSize: 17, numColors: 11, numMoves: 66, points: 290, lvl: 60 },

    61: { gridSize: 17, numColors: 11, numMoves: 67, points: 292, lvl: 61 },
    62: { gridSize: 17, numColors: 11, numMoves: 68, points: 295, lvl: 62 },
    63: { gridSize: 17, numColors: 12, numMoves: 69, points: 298, lvl: 63 },
    64: { gridSize: 17, numColors: 12, numMoves: 70, points: 300, lvl: 64 },
    65: { gridSize: 17, numColors: 12, numMoves: 71, points: 305, lvl: 65 },

    66: { gridSize: 17, numColors: 12, numMoves: 72, points: 310, lvl: 66 },
    67: { gridSize: 17, numColors: 12, numMoves: 73, points: 315, lvl: 67 },
    68: { gridSize: 17, numColors: 12, numMoves: 74, points: 320, lvl: 68 },
    69: { gridSize: 19, numColors: 13, numMoves: 75, points: 340, lvl: 69 }, // 361 möglich
    70: { gridSize: 19, numColors: 13, numMoves: 76, points: 365, lvl: 70 },

    71: { gridSize: 19, numColors: 13, numMoves: 77, points: 370, lvl: 71 },
    72: { gridSize: 19, numColors: 13, numMoves: 78, points: 375, lvl: 72 },
    73: { gridSize: 19, numColors: 13, numMoves: 79, points: 380, lvl: 73 },
    74: { gridSize: 19, numColors: 13, numMoves: 80, points: 385, lvl: 74 },
    75: { gridSize: 19, numColors: 14, numMoves: 81, points: 390, lvl: 75 },

    76: { gridSize: 19, numColors: 14, numMoves: 82, points: 395, lvl: 76 },
    77: { gridSize: 19, numColors: 14, numMoves: 83, points: 400, lvl: 77 },
    78: { gridSize: 21, numColors: 14, numMoves: 84, points: 450, lvl: 78 }, // 441 möglich
    79: { gridSize: 21, numColors: 14, numMoves: 85, points: 455, lvl: 79 },
    80: { gridSize: 21, numColors: 14, numMoves: 86, points: 460, lvl: 80 },

    81: { gridSize: 21, numColors: 14, numMoves: 87, points: 465, lvl: 81 },
    82: { gridSize: 21, numColors: 15, numMoves: 88, points: 470, lvl: 82 },
    83: { gridSize: 21, numColors: 15, numMoves: 89, points: 475, lvl: 83 },
    84: { gridSize: 21, numColors: 15, numMoves: 90, points: 480, lvl: 84 },
    85: { gridSize: 21, numColors: 15, numMoves: 91, points: 485, lvl: 85 },

    86: { gridSize: 23, numColors: 15, numMoves: 92, points: 525, lvl: 86 }, // 529 möglich
    87: { gridSize: 23, numColors: 15, numMoves: 93, points: 530, lvl: 87 },
    88: { gridSize: 23, numColors: 15, numMoves: 94, points: 535, lvl: 88 },
    89: { gridSize: 23, numColors: 16, numMoves: 95, points: 540, lvl: 89 },
    90: { gridSize: 23, numColors: 16, numMoves: 96, points: 545, lvl: 90 },

    91: { gridSize: 23, numColors: 16, numMoves: 97, points: 550, lvl: 91 },
    92: { gridSize: 23, numColors: 16, numMoves: 98, points: 555, lvl: 92 },
    93: { gridSize: 25, numColors: 16, numMoves: 99, points: 620, lvl: 93 }, // 625 möglich
    94: { gridSize: 25, numColors: 16, numMoves: 100, points: 628, lvl: 94 },
    95: { gridSize: 25, numColors: 16, numMoves: 101, points: 630, lvl: 95 },

    96: { gridSize: 25, numColors: 17, numMoves: 102, points: 635, lvl: 96 },
    97: { gridSize: 25, numColors: 17, numMoves: 103, points: 640, lvl: 97 },
    98: { gridSize: 25, numColors: 17, numMoves: 104, points: 645, lvl: 98 },
    99: { gridSize: 25, numColors: 17, numMoves: 105, points: 650, lvl: 99 },
    100: { gridSize: 27, numColors: 17, numMoves: 106, points: 730, lvl: 100 }, // 729 möglich
    101: { gridSize: 27, numColors: 17, numMoves: 107, points: 735, lvl: 101 },
    102: { gridSize: 27, numColors: 17, numMoves: 108, points: 740, lvl: 102 },
    103: { gridSize: 27, numColors: 17, numMoves: 109, points: 745, lvl: 103 },
    104: { gridSize: 27, numColors: 17, numMoves: 110, points: 750, lvl: 104 },
    105: { gridSize: 27, numColors: 18, numMoves: 111, points: 755, lvl: 105 },

    106: { gridSize: 27, numColors: 18, numMoves: 112, points: 760, lvl: 106 },
    107: { gridSize: 27, numColors: 18, numMoves: 113, points: 765, lvl: 107 },
    108: { gridSize: 29, numColors: 18, numMoves: 115, points: 841, lvl: 108 }, // 841 möglich
    109: { gridSize: 29, numColors: 18, numMoves: 116, points: 845, lvl: 109 },
    110: { gridSize: 29, numColors: 18, numMoves: 117, points: 850, lvl: 110 },

    111: { gridSize: 29, numColors: 18, numMoves: 118, points: 855, lvl: 111 },
    112: { gridSize: 29, numColors: 18, numMoves: 119, points: 860, lvl: 112 },
    113: { gridSize: 29, numColors: 18, numMoves: 120, points: 865, lvl: 113 },
    114: { gridSize: 29, numColors: 18, numMoves: 121, points: 870, lvl: 114 },
    115: { gridSize: 31, numColors: 18, numMoves: 123, points: 961, lvl: 115 }, // 961 möglich

    116: { gridSize: 31, numColors: 18, numMoves: 124, points: 965, lvl: 116 },
    117: { gridSize: 31, numColors: 18, numMoves: 125, points: 970, lvl: 117 },
    118: { gridSize: 31, numColors: 18, numMoves: 126, points: 975, lvl: 118 },
    119: { gridSize: 31, numColors: 18, numMoves: 127, points: 980, lvl: 119 },
    120: { gridSize: 31, numColors: 18, numMoves: 128, points: 985, lvl: 120 },


          // Weitere 30 Level
    121: { gridSize: 25, numColors: 9, numMoves: 50, points: 630, lvl: 121 },
    122: { gridSize: 25, numColors: 9, numMoves: 52, points: 640, lvl: 122 },
    123: { gridSize: 25, numColors: 10, numMoves: 54, points: 655, lvl: 123 },
    124: { gridSize: 27, numColors: 10, numMoves: 56, points: 730, lvl: 124 },
    125: { gridSize: 27, numColors: 10, numMoves: 58, points: 750, lvl: 125 },
    126: { gridSize: 27, numColors: 11, numMoves: 60, points: 765, lvl: 126 },
    127: { gridSize: 27, numColors: 11, numMoves: 62, points: 780, lvl: 127 },
    128: { gridSize: 29, numColors: 11, numMoves: 64, points: 840, lvl: 128 },
    129: { gridSize: 29, numColors: 12, numMoves: 66, points: 850, lvl: 129 },
    130: { gridSize: 29, numColors: 12, numMoves: 68, points: 870, lvl: 130 },
    131: { gridSize: 29, numColors: 13, numMoves: 70, points: 890, lvl: 131 },
    132: { gridSize: 31, numColors: 13, numMoves: 72, points: 960, lvl: 132 },
    133: { gridSize: 31, numColors: 13, numMoves: 74, points: 980, lvl: 133 },
    134: { gridSize: 31, numColors: 14, numMoves: 76, points: 1000, lvl: 134 },
    135: { gridSize: 31, numColors: 14, numMoves: 78, points: 1020, lvl: 135 },
    136: { gridSize: 33, numColors: 14, numMoves: 80, points: 1080, lvl: 136 },
    137: { gridSize: 33, numColors: 15, numMoves: 82, points: 1100, lvl: 137 },
    138: { gridSize: 33, numColors: 15, numMoves: 84, points: 1120, lvl: 138 },
    139: { gridSize: 33, numColors: 16, numMoves: 86, points: 1140, lvl: 139 },
    140: { gridSize: 35, numColors: 16, numMoves: 88, points: 1225, lvl: 140 },
    141: { gridSize: 35, numColors: 16, numMoves: 90, points: 1240, lvl: 141 },
    142: { gridSize: 35, numColors: 17, numMoves: 92, points: 1260, lvl: 142 },
    143: { gridSize: 35, numColors: 17, numMoves: 94, points: 1280, lvl: 143 },
    144: { gridSize: 37, numColors: 17, numMoves: 96, points: 1360, lvl: 144 },
    145: { gridSize: 37, numColors: 18, numMoves: 98, points: 1380, lvl: 145 },
    146: { gridSize: 37, numColors: 18, numMoves: 100, points: 1400, lvl: 146 },
    147: { gridSize: 37, numColors: 18, numMoves: 102, points: 1420, lvl: 147 },
    148: { gridSize: 39, numColors: 18, numMoves: 104, points: 1520, lvl: 148 },
    149: { gridSize: 39, numColors: 18, numMoves: 106, points: 1540, lvl: 149 },
    150: { gridSize: 41, numColors: 18, numMoves: 110, points: 1800, lvl: 150 }
};







// Funktion zum Hervorheben und Hinzufügen von Level-Boxen für abgeschlossene Levels
function highlightCompletedLevels() {
    const levelButtonsContainer = document.getElementById('levelButtons');
    const currentUser = localStorage.getItem('currentUsername'); // Aktuellen Benutzer abrufen

    // Überprüfen, ob der Benutzer eingeloggt ist
    if (!currentUser) {
        alert('Kein Benutzername gefunden. Bitte melden Sie sich an.');
        return;
    }

    let allPreviousLevelsCompleted = true; // Alle Level 1-120 als abgeschlossen annehmen

    // Schleife durch alle Level von 1 bis 120
    for (let i = 1; i <= 120; i++) {
        const levelKey = `level_${currentUser}_${i}`; // Benutzer-spezifischer Level-Schlüssel
        const levelData = JSON.parse(localStorage.getItem(levelKey));

        // Versuche, das Level-Button-Element zu finden
        let levelBox = document.getElementById(`btn-l${i}`);

        // Falls keine Box für das Level existiert, wird eine neue erstellt
        if (!levelBox) {
            levelBox = document.createElement('div');
            levelBox.id = `btn-l${i}`;
            levelBox.className = 'level';
            levelBox.textContent = i;
            levelBox.onclick = () => startChallenge(i);
            levelButtonsContainer.appendChild(levelBox);
            levelBox.style.display = 'block'; // Anzeigen
        }

        // Hintergrundfarbe je nach Erfolg auf grün oder orange setzen
        if (levelData && levelData.success === true) {
            levelBox.style.backgroundColor = 'lightgreen';
        } else if (levelData && levelData.success === false) {
            levelBox.style.backgroundColor = 'orange';
            allPreviousLevelsCompleted = false; // Wenn ein Level nicht erfolgreich war, setze auf false
        } else {
            allPreviousLevelsCompleted = false; // Wenn das Level nicht gespielt wurde, setze auf false
        }
    }

    // Wenn alle vorherigen Level abgeschlossen sind, zeige die Level 121-150 an
    if (allPreviousLevelsCompleted) {
        for (let i = 121; i <= 150; i++) {
            const levelKey = `level_${currentUser}_${i}`;
            const levelData = JSON.parse(localStorage.getItem(levelKey));

            // Versuche, das Level-Button-Element zu finden
            let levelBox = document.getElementById(`btn-l${i}`);

            // Falls keine Box für das Level existiert, wird eine neue erstellt
            if (!levelBox) {
                levelBox = document.createElement('div');
                levelBox.id = `btn-l${i}`;
                levelBox.className = 'level';
                levelBox.textContent = i;
                levelBox.onclick = () => startChallenge(i);
                levelButtonsContainer.appendChild(levelBox);
            }

            // Hintergrundfarbe je nach Erfolg
            if (levelData && levelData.success === true) {
                levelBox.style.backgroundColor = 'lightgreen';
            } else if (levelData && levelData.success === false) {
                levelBox.style.backgroundColor = 'orange';
            }
        }
    } else {
        // Wenn nicht alle vorherigen Level abgeschlossen sind, verstecke die Level 121-150
        for (let i = 121; i <= 150; i++) {
            let levelBox = document.getElementById(`btn-l${i}`);
            if (levelBox) {
                levelBox.style.display = 'none'; // Verstecken
            }
        }
    }
}


// Funktion zum Starten eines Levels für den aktuellen Benutzer
function startChallenge(level) {
    const { gridSize, numColors, numMoves, points, lvl } = levels[level];
    const currentUser = localStorage.getItem('currentUsername'); // Aktuellen Benutzer abrufen

    // Überprüfen, ob der Benutzer eingeloggt ist
    if (!currentUser) {
        alert('Bitte melden Sie sich an, um ein Level zu spielen.');
        return;
    }

    const levelKey = `level_${currentUser}_${lvl}`; // Benutzer-spezifischer Level-Schlüssel

    // Level-Daten abrufen und Erfolg überprüfen
    let levelData = JSON.parse(localStorage.getItem(levelKey));
    if (levelData === null || levelData.success === false) {
        localStorage.setItem(levelKey, JSON.stringify({ success: false }));
        window.location.href = `herausforderung_spiel.html?gridSize=${gridSize}&numColors=${numColors}&numMoves=${numMoves}&points=${points}&lvl=${lvl}`;
    }
}

        // Abmelden und zur Startseite weiterleiten
        function logout() {
            alert('Erfolgreich abgemeldet!');
            window.location.href = 'index.html';
        }

function accountDelete() {
    const userConfirmed = confirm('Möchtest du wirklich unwiderruflich deinen gesamten Account löschen?');
    if (userConfirmed) {
        const currentUser = localStorage.getItem('currentUsername');

        if (currentUser) {
            // Alle Schlüssel in localStorage durchgehen
            for (let key in localStorage) {
                // Schlüssel, die mit dem Benutzernamen beginnen oder spezifische Level-Informationen sind
                if (key.startsWith(currentUser) || key.startsWith("level_") || key.startsWith("exp_")) {
                    localStorage.removeItem(key); // Benutzer- und Level-Informationen entfernen
                }
            }

            // Den Benutzernamen selbst entfernen
            localStorage.removeItem('currentUsername');
        }

        // Benutzer informieren und zur Startseite zurückkehren
        alert('Dein Account wurde gelöscht.');
        window.location.href = 'index.html';
    } else {
        // Nichts tun, wenn der Benutzer "Abbrechen" wählt
    }
}



// Beim Laden der Seite die abgeschlossenen und gespeicherten Level markieren
window.onload = function() {
    highlightCompletedLevels();
    loadMusic()
};
    </script>
</body>
</html>
